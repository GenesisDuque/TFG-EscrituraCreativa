{"ast":null,"code":"\"use strict\";\n\nconst config = require(\"../BBDD/config\");\n\nconst modelo = require(\"../models/modelUsuario\");\n\nconst path = require(\"path\");\n\nconst mysql = require(\"mysql\");\n\nconst express = require(\"express\");\n\nconst bodyParser = require(\"body-parser\");\n\nconst app = express();\nconst pool = mysql.createPool(config.mysqlConfig);\nconst modelUsuario = new modelo(pool);\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\n\nfunction grupo(request, response, next) {\n  let grupo = request.params.id;\n\n  if (grupo != null) {\n    modelUsuario.getUsuariosByGrupo(grupo, function (err, listaUsuarios) {\n      if (err) {\n        if (err.message == \"No se puede conectar a la base de datos.\") {\n          //next(err);\n          console.log(\"No se puede conectar a la base de datos\");\n        }\n\n        response.status(200);\n        /*response.render(\"perfil\", {\r\n            error: err.message\r\n        });*/\n\n        console.log(err.message);\n      } else if (listaUsuarios == null) {\n        response.status(200);\n        /*response.render(\"perfil\", {\r\n            error: \"El usuario no existe.\"\r\n        });*/\n\n        console.log(\"El grupo es nulo\");\n      } else {\n        response.status(200);\n        /*\r\n        response.render(\"perfil\", {\r\n            error: null,\r\n            usuarioPerfil: usuarioPerfil\r\n        });\r\n        */\n\n        console.log(listausuarios);\n      }\n    });\n  } else {\n    response.status(200);\n    console.log(\"El id es nulo\");\n  }\n}\n\nmodule.exports = {\n  grupo: grupo\n};","map":{"version":3,"sources":["D:/UCM/TFG/codigo/TFG-EscrituraCreativa/src/controllers/controllerUsuario.js"],"names":["config","require","modelo","path","mysql","express","bodyParser","app","pool","createPool","mysqlConfig","modelUsuario","use","urlencoded","extended","grupo","request","response","next","params","id","getUsuariosByGrupo","err","listaUsuarios","message","console","log","status","listausuarios","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,gBAAD,CAAtB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,wBAAD,CAAtB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMG,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMI,OAAO,GAAGJ,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMK,UAAU,GAAGL,OAAO,CAAC,aAAD,CAA1B;;AACA,MAAMM,GAAG,GAAGF,OAAO,EAAnB;AAGA,MAAMG,IAAI,GAAGJ,KAAK,CAACK,UAAN,CAAiBT,MAAM,CAACU,WAAxB,CAAb;AACA,MAAMC,YAAY,GAAG,IAAIT,MAAJ,CAAWM,IAAX,CAArB;AAEAD,GAAG,CAACK,GAAJ,CAAQN,UAAU,CAACO,UAAX,CAAsB;AAACC,EAAAA,QAAQ,EAAC;AAAV,CAAtB,CAAR;;AAEA,SAASC,KAAT,CAAeC,OAAf,EAAwBC,QAAxB,EAAkCC,IAAlC,EAAuC;AACnC,MAAIH,KAAK,GAAGC,OAAO,CAACG,MAAR,CAAeC,EAA3B;;AACA,MAAIL,KAAK,IAAI,IAAb,EAAmB;AACfJ,IAAAA,YAAY,CAACU,kBAAb,CAAgCN,KAAhC,EAAuC,UAASO,GAAT,EAAcC,aAAd,EAA6B;AAChE,UAAGD,GAAH,EAAQ;AACJ,YAAIA,GAAG,CAACE,OAAJ,IAAe,0CAAnB,EAA+D;AAC3D;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ;AACH;;AACDT,QAAAA,QAAQ,CAACU,MAAT,CAAgB,GAAhB;AACA;AAChB;AACA;;AACgBF,QAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACE,OAAhB;AACH,OAVD,MAUO,IAAID,aAAa,IAAI,IAArB,EAA2B;AAC9BN,QAAAA,QAAQ,CAACU,MAAT,CAAgB,GAAhB;AACA;AAChB;AACA;;AACgBF,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH,OANM,MAMA;AAEHT,QAAAA,QAAQ,CAACU,MAAT,CAAgB,GAAhB;AACA;AAChB;AACA;AACA;AACA;AACA;;AACeF,QAAAA,OAAO,CAACC,GAAR,CAAYE,aAAZ;AACF;AACJ,KA5BD;AA6BH,GA9BD,MA8BO;AACHX,IAAAA,QAAQ,CAACU,MAAT,CAAgB,GAAhB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;AACJ;;AAEDG,MAAM,CAACC,OAAP,GAAiB;AACbf,EAAAA,KAAK,EAACA;AADO,CAAjB","sourcesContent":["\"use strict\"\r\n\r\nconst config = require(\"../BBDD/config\");\r\nconst modelo = require(\"../models/modelUsuario\");\r\nconst path = require(\"path\");\r\nconst mysql = require(\"mysql\");\r\nconst express = require(\"express\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst app = express();\r\n\r\n\r\nconst pool = mysql.createPool(config.mysqlConfig);\r\nconst modelUsuario = new modelo(pool);\r\n\r\napp.use(bodyParser.urlencoded({extended:true}));\r\n\r\nfunction grupo(request, response, next){\r\n    let grupo = request.params.id;\r\n    if (grupo != null) {\r\n        modelUsuario.getUsuariosByGrupo(grupo, function(err, listaUsuarios) {\r\n            if(err) {\r\n                if (err.message == \"No se puede conectar a la base de datos.\") {\r\n                    //next(err);\r\n                    console.log(\"No se puede conectar a la base de datos\");\r\n                }\r\n                response.status(200);\r\n                /*response.render(\"perfil\", {\r\n                    error: err.message\r\n                });*/\r\n                console.log(err.message);\r\n            } else if (listaUsuarios == null) {\r\n                response.status(200);\r\n                /*response.render(\"perfil\", {\r\n                    error: \"El usuario no existe.\"\r\n                });*/\r\n                console.log(\"El grupo es nulo\");\r\n            } else {\r\n                \r\n                response.status(200);\r\n                /*\r\n                response.render(\"perfil\", {\r\n                    error: null,\r\n                    usuarioPerfil: usuarioPerfil\r\n                });\r\n                */\r\n               console.log(listausuarios)\r\n            }\r\n        });\r\n    } else {\r\n        response.status(200);\r\n        console.log(\"El id es nulo\");\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    grupo:grupo\r\n};"]},"metadata":{},"sourceType":"module"}